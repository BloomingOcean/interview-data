

## 一、输入一个域名后发生了什么？

### 1、总流程

- DNS 解析:   将域名解析成 IP 地址
- TCP 连接：TCP 三次握手
- 发送 HTTP 请求
- 服务器处理请求并返回 HTTP 报文
- 浏览器解析渲染页面
- 断开连接：TCP 四次挥手

### 2、DNS解析步骤

- 浏览器缓存：浏览器会按照一定的频率缓存 DNS 记录。
- 操作系统缓存：如果浏览器缓存中找不到需要的 DNS 记录，那就去操作系统中找。
- 路由缓存：路由器也有 DNS 缓存。
- ISP 的 DNS 服务器：ISP 是互联网服务提供商(Internet Service Provider)的简称，ISP 有专门的 DNS 服务器应对 DNS 查询请求。
- 根服务器：ISP 的 DNS 服务器还找不到的话，它就会向根服务器发出请求，进行递归查询（DNS 服务器先问根域名服务器.com 域名服务器的 IP 地址，然后再问.baidu 域名服务器，依次类推）

### 3、浏览器向服务器发送HTTP请求

- TCP三次握手
- HTTP请求响应信息
- 关闭TCP连接

## 二、TCP连接3次握手、断开4次挥手（请求报文包含什么）

### 1、三次握手

首先是Client端发送请求报文，Server端接受连接后发送ACK报文，并为这次连接分配内存。Client端接收到ACK报文之后也向Server端发送ACK报文，并分配资源，这样就建立起了TCP连接。

### 2、四次挥手

假设是Client端发送中断连接请求，也就是发送FIN报文，并进入FIN_WAIT状态。Server端接收到FIN请求报文后，如果还有数据没有发送完，则会继续发送数据，并且发送ACK报文给Client端表示连接不断开。直到Server端数据发送完毕，则Server端才会发送FIN报文给Client端来告诉Client端可以断开连接了。Client端接收到Server端的FIN报文后，需要向Server端表示我收到了关闭的消息了，于是向Server端发送ACK报文，然后Client端进入TIME_WAIT状态（会等待2个MSL时间，一般是30秒）。此时Server端已经发送FIN报文过了1个MSL时间，直到Server端等了2个MSL时间（这个时候Client端已经等了1个MSL时间），发现还没收到Client端发送的ACK报文，那么Server端就不知道Client是否收到了自己的FIN请求，于是再发一次FIN请求。第二个FIN请求到达Client端的时间，在Client看来刚好2个MSL时长，于是Client端再次发送ACK请求，并重新开始计时等待时间。Server端收到ACK请求后便关闭连接，Client端在2MSL时长之后发现Server端没有再发FIN请求了，便知道Server端已经关闭了，那么Client端也就随之关闭

## 三、HTTP是什么？描述一下

HTTP全称为“超文本传输协议”，分为三个方面来讲解HTTP，分别是超文本、传输、协议。首先，HTTP的功能是什么，这就能体现HTTP的传输功能，并且HTTP是双向传输，也就是说能在两个计算机间相互传递数据，而不只是单方向的传输和接收。那既然是传输，那传输什么呢，那就是第二个点：超文本。HTTP会把超文本作为传输载体在两个计算机间进行传输。而最后一点就是协议，协议顾名思义就是一个规矩，一种约定规范。HTTP这个协议就规定了两台计算机之间用什么方式进行传输、如何控制传输、如何处理传输错误这些问题。

总结：HTTP 是一个在计算机世界里专门在「两点」之间「传输」文字、图片、音频、视频等「超文本」数据 的「约定和规范」

四、